<launch>
  <arg name="sim" default="false" />

  <!-- Launch localization if in simulation, otherwise this is handled elsewhere on the Husky-->
  <include file="$(find robot_localization)/launch/sureclean_navsat_ekf.launch" if="$(arg sim)">
    <arg name="sim" value="$(arg sim)"/>
  </include>

  <!-- GPS navigation node, handles collecting and sending waypoints to controller-->
  <node pkg="gps_nav" type="gps_nav_node" name="gps_nav_node" clear_params="true" output="screen">
    <param name="autonomous" value="true"/>
    <remap from="/gps/fix" to="/navsat/fix" if="$(arg sim)"/>
  </node>

  <!-- Movement controller-->
  <node pkg="movement" type="movement_node" name="movement_node" output="screen">
    <param name="kp_linear" type="double" value="1.0"/>
    <param name="kp_angular" type="double" value="1.0"/>
    <param name="min_angular" type="double" value="0.15"/>
    <param name="max_angular" type="double" value="0.3"/>
    <param name="min_linear" type="double" value="0.4"/>
    <param name="max_linear" type="double" value="0.8"/>
    <param name="final_approach_range" type="double" value="2.0"/>
    <param name="angular_thresh" type="double" value="0.02"/>
    <param name="angular_thresh_movement" type="double" value="0.04"/>
    <param name="linear_thresh" type="double" value=".1"/>
  </node>
</launch>
